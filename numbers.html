<!DOCTYPE html>
<html>

<head>
    <title>Name and Date Input</title>
    <style>
        .right {
            top: 10%;
            left: 40%;
            position: absolute;
        }
    </style>
    <script>
        function calculateNumber() {
            var name = document.getElementById("name").value.toUpperCase();
            var date = document.getElementById("date").value;
            var result = document.getElementById("result");
            var vowels = [];
            var consonants = [];
            var vowelSum = 0;
            var consonantSum = 0;
            var day = date.split('-')[2];
            var month = date.split('-')[1];
            var year = date.split('-')[0];
            var daySum = sumDigits(day);
            var monthSum = sumDigits(month);
            var yearSum = sumDigits(year);
            var dayMonthSum = daySum + monthSum;
            var dayMonthYearSum = daySum + monthSum + yearSum;
            var currentYear = new Date().getFullYear();
            var currentMonth = new Date().getMonth() + 1;
            var worldYearSum = sumDigits(currentYear.toString());
            var personalYear = processSum(worldYearSum + processSum(dayMonthSum));
            var personalMonth = processSum(personalYear + sumDigits(currentMonth.toString()));

            var numberMapping = {
                A: 1, J: 1, S: 1,
                B: 2, K: 2, T: 2,
                C: 3, L: 3, U: 3,
                D: 4, M: 4, V: 4,
                E: 5, N: 5, W: 5,
                F: 6, O: 6, X: 6,
                G: 7, P: 7, Y: 7,
                H: 8, Q: 8, Z: 7,
                I: 9, R: 9,
            };

            var calculatedNumbers = [];
            for (var i = 0; i < name.length; i++) {
                var letter = name.charAt(i);
                if (numberMapping.hasOwnProperty(letter)) {
                    calculatedNumbers.push(numberMapping[letter]);
                    if (isVowel(letter)) {
                        vowels.push(letter);
                        vowelSum += numberMapping[letter];
                    } else {
                        consonants.push(letter);
                        consonantSum += numberMapping[letter];
                    }
                }
            }
            result.innerHTML = processSum(vowelSum) + " " + processSum(consonantSum) + " " + processSum(vowelSum + consonantSum) + " " + processSum(daySum) + " " + processSum(dayMonthYearSum) + " " + processSum(dayMonthSum) + "<br>";
            result.innerHTML += "Vowels: " + vowels.join(", ") + "<br>";
            result.innerHTML += "Consonants: " + consonants.join(", ") + "<br>";
            result.innerHTML += "Calculated Numbers: " + calculatedNumbers.join(", ") + "<br>";
            result.innerHTML += "Vowel Sum (Feel Inside): " + processSum(vowelSum) + "<br>";
            result.innerHTML += "Consonant Sum (How you are perceived): " + processSum(consonantSum) + "<br>";
            result.innerHTML += "Vowels + Consonant (Your strength): " + processSum(vowelSum + consonantSum) + "<br>";
            result.innerHTML += "Day Sum (How others see you): " + processSum(daySum) + "<br>";
            result.innerHTML += "Day Month Year Sum (Your path): " + processSum(dayMonthYearSum) + "<br>";
            result.innerHTML += "Day Month Sum (Your Attitude): " + processSum(dayMonthSum) + "<br>";
            result.innerHTML += "World Year Sum: " + processSum(worldYearSum) + "<br>";
            result.innerHTML += "Personal Year: " + personalYear + "<br>";
            result.innerHTML += "Personal Month: " + personalMonth + "<br>";
            result.innerHTML += "World Compatibility: " + worldYearSum + " Attitude: " + processSum(dayMonthSum) + ": " + convertCompatability(processCompatability(processSum(dayMonthSum), processSum(worldYearSum))) + "<br>";

            var calendar = createCalendar(currentMonth, currentYear, processSum(personalMonth));
            document.getElementById("calendarContainer").innerHTML = calendar;
        }

        function isVowel(letter) {
            var vowels = ["A", "E", "I", "O", "U"];
            return vowels.includes(letter);
        }

        function sumDigits(number) {
            var sum = 0;
            for (var i = 0; i < number.length; i++) {
                sum += parseInt(number.charAt(i));
            }
            return sum;
        }

        function processSum(sum) {
            if (sum === 11 || sum === 22 || sum === 33) {
                return sum;
            } else {
                while (sum > 9) {
                    if (sum === 11 || sum === 22 || sum === 33) {
                        return sum;
                    }
                    var digits = sum.toString().split("").map(Number);
                    sum = digits.reduce(function (a, b) {
                        return a + b;
                    });
                }
                return sum;
            }
        }

        function processSumFull(sum) {
            while (sum > 9) {
                var digits = sum.toString().split("").map(Number);
                sum = digits.reduce(function (a, b) {
                    return a + b;
                });
            }
            return sum;
        }

        function processCompatability(attitude, compareNumber) {
            var natural = 2
            var compatable = 1
            var neutral = 0
            var challenge = -1
            if (attitude == 1) {
                if (compareNumber == 1 || compareNumber == 5 || compareNumber == 7) {
                    return natural
                } else if (compareNumber == 2 || compareNumber == 3 || compareNumber == 9) {
                    return compatable
                } else if (compareNumber == 8) {
                    return neutral
                } else if (compareNumber == 4 || compareNumber == 6) {
                    return challenge
                } else {
                    return 0
                }
            }
            if (attitude == 2 || attitude == 11) {
                if (compareNumber == 2 || compareNumber == 4 || compareNumber == 8) {
                    return natural
                } else if (compareNumber == 1 || compareNumber == 3 || compareNumber == 6 || compareNumber == 9) {
                    return compatable
                } else if (compareNumber == 5 || compareNumber == 7) {
                    return challenge
                } else {
                    return 0
                }
            }
            if (attitude == 3 || attitude == 33) {
                if (compareNumber == 3 || compareNumber == 6 || compareNumber == 9) {
                    return natural
                } else if (compareNumber == 1 || compareNumber == 2 || compareNumber == 5) {
                    return compatable
                } else if (compareNumber == 4 || compareNumber == 7 || compareNumber == 8) {
                    return challenge
                } else {
                    return 0
                }
            }
            if (attitude == 4) {
                if (compareNumber == 2 || compareNumber == 4 || compareNumber == 8) {
                    return natural
                } else if (compareNumber == 6 || compareNumber == 7) {
                    return compatable
                } else if (compareNumber == 1 || compareNumber == 3 || compareNumber == 5 || compareNumber == 9) {
                    return challenge
                } else {
                    return 0
                }
            }
            if (attitude == 5) {
                if (compareNumber == 1 || compareNumber == 5 || compareNumber == 7) {
                    return natural
                } else if (compareNumber == 3 || compareNumber == 9) {
                    return compatable
                } else if (compareNumber == 8) {
                    return neutral
                } else if (compareNumber == 2 || compareNumber == 4 || compareNumber == 6) {
                    return challenge
                } else {
                    return 0
                }
            }
            if (attitude == 6) {
                if (compareNumber == 3 || compareNumber == 6 || compareNumber == 9) {
                    return natural
                } else if (compareNumber == 2 || compareNumber == 4 || compareNumber == 8) {
                    return compatable
                } else if (compareNumber == 1 || compareNumber == 5 || compareNumber == 7) {
                    return challenge
                } else {
                    return 0
                }
            }
            if (attitude == 7) {
                if (compareNumber == 1 || compareNumber == 5 || compareNumber == 7) {
                    return natural
                } else if (compareNumber == 4) {
                    return compatable
                } else if (compareNumber == 2 || compareNumber == 3 || compareNumber == 6 || compareNumber == 8 || compareNumber == 9) {
                    return challenge
                } else {
                    return 0
                }
            }
            if (attitude == 8) {
                if (compareNumber == 2 || compareNumber == 4 || compareNumber == 8) {
                    return natural
                } else if (compareNumber == 6) {
                    return compatable
                } else if (compareNumber == 3 || compareNumber == 7 || compareNumber == 9) {
                    return neutral
                } else if (compareNumber == 1 || compareNumber == 5) {
                    return challenge
                } else {
                    return 0
                }
            }
            if (attitude == 9) {
                if (compareNumber == 3 || compareNumber == 6 || compareNumber == 9) {
                    return natural
                } else if (compareNumber == 1 || compareNumber == 2 || compareNumber == 5) {
                    return compatable
                } else if (compareNumber == 4 || compareNumber == 7 || compareNumber == 8) {
                    return challenge
                } else {
                    return 0
                }
            }
        }

        function convertCompatability(compatabilityNumber) {
            if (compatabilityNumber == 2) {
                return "Natural"
            } else if (compatabilityNumber == 1) {
                return "Compatable"
            } else if (compatabilityNumber == 0) {
                return "Neutral"
            } else if (compatabilityNumber == -1) {
                return "Challenge"
            }
        }

        //Calendar******************************************************************

        // Function to create and populate the calendar for a given month and year
        function createCalendar(month, year, attitude) {
            var daysInMonth = new Date(year, month, 0).getDate();
            var firstDayOfWeek = new Date(year, month - 1, 1).getDay();

            var calendar = '<table border="1">';
            calendar += '<tr><th colspan="7">' + getMonthName(month) + ' ' + year + '</th></tr>';
            calendar += '<tr><th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr>';
            var day = 1;
            for (var week = 0; week < 6; week++) {
                calendar += '<tr>';
                for (var dayOfWeek = 0; dayOfWeek < 7; dayOfWeek++) {
                    if (week === 0 && dayOfWeek < firstDayOfWeek) {
                        calendar += '<td>&nbsp;</td>';
                    } else if (day <= daysInMonth) {
                        calendar += '<td>' + day + ' ' + convertCompatability(processCompatability(attitude, processSumFull(day))) + '</td>';
                        day++;
                    } else {
                        calendar += '<td>&nbsp;</td>';
                    }
                }
                calendar += '</tr>';
                if (day > daysInMonth) break;
            }
            calendar += '</table>';
            return calendar;
        }

        function getMonthName(month) {
            var monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
            return monthNames[month - 1];
        }

        // Function to change the displayed month in the calendar
        function changeCalendarMonth() {
            var month = parseInt(document.getElementById("monthSelect").value);
            var year = parseInt(document.getElementById("yearSelect").value);
            var calendar = createCalendar(month, year, 0);
            document.getElementById("calendarContainer").innerHTML = calendar;
        }

        // Populate the month and year select options on page load
        window.onload = function () {
            var monthSelect = document.getElementById("monthSelect");
            var yearSelect = document.getElementById("yearSelect");
            var currentDate = new Date();
            var currentYear = currentDate.getFullYear();
            var currentMonth = currentDate.getMonth() + 1;

            for (var i = 1; i <= 12; i++) {
                var option = document.createElement("option");
                option.value = i;
                option.text = getMonthName(i);
                if (i === currentMonth) {
                    option.selected = true;
                }
                monthSelect.appendChild(option);
            }

            for (var year = currentYear - 10; year <= currentYear + 10; year++) {
                var option = document.createElement("option");
                option.value = year;
                option.text = year;
                if (year === currentYear) {
                    option.selected = true;
                }
                yearSelect.appendChild(option);
            }

            changeCalendarMonth();
        };

    </script>
</head>

<body>
    <h1>Name and Date Input</h1>
    <form>
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required>
        <br><br>
        <label for="date">Date:</label>
        <input type="date" id="date" name="date" required>
        <br><br>
        <input type="button" value="Submit" onclick="calculateNumber()">
        <div>
            <br>
            Tesla - 07/01/2003<br>
            United states - 07/04/1776<br>
            Stock Market - 5/17/1792
        </div>
    </form>
    <br>
    <div id="result"></div>
    <div class="right">
        <br>
        <div id="calendarContainer"></div>
        <br>
        <select id="monthSelect" onchange="changeCalendarMonth()"></select>
        <select id="yearSelect" onchange="changeCalendarMonth()"></select>
    </div>
</body>

</html>